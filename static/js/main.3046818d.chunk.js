(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{14:function(e,a,t){e.exports=t.p+"static/media/power_by_iovlabs.0403ff12.svg"},15:function(e,a,t){e.exports=t.p+"static/media/logo.5e7b55e5.svg"},16:function(e,a,t){e.exports=t(42)},21:function(e,a,t){},39:function(e,a,t){},40:function(e,a,t){},41:function(e,a,t){},42:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(13),r=t.n(c),s=(t(21),t(2)),m=t(3),i=t.n(m),o=(t(39),t(40),"https://72be6abcfb65.ngrok.io/issuer-back-office"),u=t(14),d=t.n(u),E=t(15),b=t.n(E),f=function(e){var a=e.login,t=Object(n.useState)(""),c=Object(s.a)(t,2),r=c[0],m=c[1],u=Object(n.useState)(""),E=Object(s.a)(u,2),f=E[0],v=E[1],h=Object(n.useState)(""),g=Object(s.a)(h,2),N=g[0],p=g[1],w={username:r,password:f};return l.a.createElement("div",{className:"login"},l.a.createElement("div",{className:"login-container"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("p",{className:"login-header"},"Sign in to"),l.a.createElement("h3",{className:"login-title"},"RIF Credential manager"),l.a.createElement("form",{className:"form",onSubmit:function(e){e.preventDefault(),i.a.post(o+"/auth",{},{auth:w}).then((function(e){200===e.status?a(w):p(e.data.toString())})).catch((function(e){return p(e.message)}))}},l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"inputEmail3",className:"col-sm-3 col-form-label login-label"},"Username"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("input",{type:"text",className:"form-control login-control",id:"inputEmail3",onChange:function(e){return m(e.target.value)},value:r}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:"inputPassword3",className:"col-sm-3 col-form-label login-label"},"Password"),l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("input",{type:"password",className:"form-control login-control",id:"inputPassword3",onChange:function(e){return v(e.target.value)},value:f}))),N&&l.a.createElement("div",{className:"alert alert-warning"},N),l.a.createElement("div",{className:"form-group row"},l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("div",{className:"form-check"},l.a.createElement("input",{className:"form-check-input login-check",type:"checkbox",id:"gridCheck1",disabled:!0}),l.a.createElement("label",{className:"form-check-label",htmlFor:"gridCheck1"},"Remember me")))),l.a.createElement("button",{type:"submit",className:"btn btn-login"},"Login")))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("img",{src:d.a,className:"login-pbi-vector",alt:"powered-by-iov"}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("img",{src:b.a,className:"login-rif-vector",alt:"rif"}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement("p",{className:"login-cr"},"Copyright \xa9 2020 IOV Labs. All rights reserved."))))))},v=(t(41),function(e){return e.slice(0,30)+"..."+e.slice(-4)}),h=function(e){var a=e.request,t=e.grantCredential,c=e.denyCredential,r=Object(n.useState)(!1),m=Object(s.a)(r,2),i=m[0],o=m[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",null,l.a.createElement("td",null,a.id),l.a.createElement("td",null,a.type),l.a.createElement("td",null,v(a.from)),l.a.createElement("td",null,a.fullName),l.a.createElement("td",null,a.isValid?"valid":"invalid"),l.a.createElement("td",null,a.status),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-link",onClick:function(){return t(a.id)}},"Grant")),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-link",onClick:function(){return c(a.id)}},"Deny")),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-link",onClick:function(){return o(!i)}},i?"show less":"show more"))),i&&a.sdr.map((function(e){return l.a.createElement("tr",{className:"row-more-info"},l.a.createElement("td",{colSpan:9},e.claimType,": ",e.claimValue))})))};var g=function(e){var a=e.auth,t=Object(n.useState)(""),c=Object(s.a)(t,2),r=c[0],m=c[1],u=Object(n.useState)([]),d=Object(s.a)(u,2),E=d[0],b=d[1];console.log(E);var f=function(e){return m(e.message)},v=Object(n.useCallback)((function(){return i.a.get("".concat(o,"/requests"),{auth:a}).then((function(e){return e.data})).then(b).catch(f)}),[a]),g=function(e){return function(t){return i.a.put("".concat(o,"/request/").concat(t,"/status"),{status:e},{auth:a}).then((function(e){if(200!==e.status)throw new Error(e.data);return e.data})).then((function(e){return b(E.map((function(a){return a.id===e.id?e:a})))})).catch(f)}},N=g("granted"),p=g("denied");return Object(n.useEffect)((function(){v()}),[v]),l.a.createElement("div",{className:"container"},l.a.createElement("h3",{className:"reply-title"},"Credential requests"),r&&l.a.createElement("div",{className:"alert alert-danger"},l.a.createElement("p",null," Error: ",r)),l.a.createElement("table",{className:"table reply-table"},l.a.createElement("thead",{className:"reply-table-header"},l.a.createElement("tr",null,l.a.createElement("th",null,"Id"),l.a.createElement("th",null,"Type"),l.a.createElement("th",null,"From"),l.a.createElement("th",null,"Full name"),l.a.createElement("th",null,"Valid"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null),l.a.createElement("th",null),l.a.createElement("th",null))),l.a.createElement("tbody",null,E.map((function(e){return l.a.createElement(h,{key:e.id,request:e,grantCredential:N,denyCredential:p})})))),l.a.createElement("button",{onClick:v,className:"btn btn-link"},"reload"))};var N=function(){var e=Object(n.useState)({isLoggedIn:!1,auth:{username:"",password:""}}),a=Object(s.a)(e,2),t=a[0],c=t.isLoggedIn,r=t.auth,m=a[1],u=Object(n.useState)(""),d=Object(s.a)(u,2),E=d[0],b=d[1],h=Object(n.useCallback)((function(){return i.a.get(o+"/identity",{auth:r}).then((function(e){return e.data})).then(b)}),[r]);return Object(n.useEffect)((function(){c&&h()}),[c,h]),c?l.a.createElement(l.a.Fragment,null,l.a.createElement("nav",{className:"navbar navbar-light navbar app-navbar"},l.a.createElement("span",{className:"navbar-brand"},"RIF Identity"),l.a.createElement("span",{className:"navbar-brand"},l.a.createElement("div",{className:"did-container"},v(E)))),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row menu"},l.a.createElement("div",{className:"col"},l.a.createElement("label",{className:"menu-item menu-item-disabled"},"Home")),l.a.createElement("div",{className:"col"},l.a.createElement("label",{className:"menu-item menu-item-disabled"},"Issue credentials")),l.a.createElement("div",{className:"col"},l.a.createElement("label",{className:"menu-item menu-item-selected"},"Grant credentials")),l.a.createElement("div",{className:"col"},l.a.createElement("label",{className:"menu-item menu-item-disabled"},"History")),l.a.createElement("div",{className:"col"},l.a.createElement("label",{className:"menu-item menu-item-disabled"},"Settings"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement(g,{auth:r}))))):l.a.createElement(f,{login:function(e){m({isLoggedIn:!0,auth:e})}})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.3046818d.chunk.js.map